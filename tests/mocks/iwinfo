#!/bin/sh
# Mock iwinfo returning ESSID from scenario mapping file
IFACE=$1
[ "$2" = info ] || exit 1
MAP_FILE="${SCENARIO}/iwinfo.map"
SSID=$(grep "^$IFACE " "$MAP_FILE" 2>/dev/null | cut -d' ' -f2-)
[ -z "$SSID" ] && SSID="TestSSID"
# Escape any embedded double quotes for a valid quoted ESSID line
ESC=$(printf '%s' "$SSID" | sed 's/\\/\\\\/g; s/"/\\"/g')
cat <<EOF
ESSID: "$ESC"
EOF
